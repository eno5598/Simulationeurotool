<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>EuroJackpot • TV‑Style Ziehung + Archiv‑Analyse</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/matter-js@0.19.0/build/matter.min.js"></script>
<style>
:root{
  --ink:#eaf7ff; --bg:#070a14; --panel:rgba(13,19,38,.78);
  --cy:#00fff0; --mag:#ff5be8; --ok:#39ff88; --warn:#f59e0b;
  --green:#18c47d; --gold:#f4c655; --chute:#16a085;
}
body{
  margin:0; color:var(--ink); font-family:Inter, ui-sans-serif, system-ui;
  background:
    radial-gradient(1200px 800px at -10% -10%, rgba(0,255,240,.10), transparent 60%),
    radial-gradient(1200px 800px at 110% -10%, rgba(255,0,234,.10), transparent 60%),
    linear-gradient(180deg,#060a12,#05070e 60%, #060a12);
}
.h1{background:linear-gradient(90deg,var(--cy),var(--mag)); -webkit-background-clip:text; color:transparent; font-weight:900}
.card{background:var(--panel); backdrop-filter: blur(14px); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:14px; box-shadow:0 14px 44px rgba(0,0,0,.45)}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;height:44px;padding:0 12px;border-radius:12px;border:1px solid rgba(255,255,255,.08);font-weight:700}
.btn--green{background:#15803d;color:#fff}.btn--amber{background:#b45309;color:#fff}.btn--gray{background:#374151;color:#fff}
.grid2{display:grid; grid-template-columns:1fr; gap:14px}
@media (min-width: 900px){ .grid2{grid-template-columns:1fr 1fr} }
.simwrap{position:relative; border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,.08); background:#03070e}
.simwrap canvas{width:100%; height:420px; max-height:62vh; background:radial-gradient(70% 90% at 50% 35%, #0b1626, #071220, #050c18)}
.label{position:absolute; top:10px; left:12px; font-size:14px; opacity:.85}
.bubble{display:inline-block; padding:3px 9px; border-radius:999px; background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.12)}
.slot{position:absolute; right:10px; top:10px; width:92px; height:92px; border-radius:14px; border:1px solid rgba(0,255,200,.28); background:linear-gradient(180deg,rgba(0,255,170,.12),rgba(0,140,120,.10)); display:flex; align-items:center; justify-content:center; font-size:12px; color:#8bffc9; box-shadow: inset 0 0 18px rgba(0,255,200,.08)}
.badge{background:rgba(255,255,255,.06); border:1px solid rgba(140,170,255,.22); border-radius:999px; padding:.2rem .6rem; font-size:.78rem}
.chip{display:inline-flex;align-items:center;justify-content:center;min-width:36px;height:36px;border-radius:999px;background:linear-gradient(180deg,#0fd5c6,#0aa39a);box-shadow:inset 0 -6px 10px rgba(0,0,0,.2),0 10px 20px rgba(0,0,0,.35);font-weight:800}
.chip--gold{background:linear-gradient(180deg,#ffe7a2,#f4c655);color:#241a05;box-shadow:inset 0 -6px 10px rgba(0,0,0,.15),0 10px 22px rgba(255,220,130,.25)}
table.heat{width:100%; border-collapse:separate; border-spacing:0 6px}
table.heat td{padding:6px 8px; background:rgba(255,255,255,.05); border-radius:8px; text-align:center}
td.hot{background:linear-gradient(180deg,rgba(30,200,160,.35),rgba(30,200,160,.12))}
td.cold{background:linear-gradient(180deg,rgba(90,120,255,.28),rgba(90,120,255,.10))}
.small{font-size:.82rem; opacity:.9}
</style>
</head>
<body class="p-4">
  <h1 class="h1 text-3xl md:text-4xl mb-3">EuroJackpot • TV‑Style Ziehung + Analyse</h1>

  <div class="grid grid-cols-1 xl:grid-cols-3 gap-3">
    <section class="card xl:col-span-2">
      <h2 class="font-bold text-xl mb-2">🌀 Simulation (Saug‑Rohr + Rutsche, 2 Trommeln)</h2>
      <p class="small mb-2">Physik: Matter.js · sanftes Anlaufen · **Rohr saugt eine Kugel** an · **Klappe öffnet** · Kugel **gleitet die Rutsche** in den Auswurf. Reihenfolge: 5 aus 50 → 2 aus 12.</p>
      <div class="grid2">
        <div class="simwrap">
          <div class="label"><span class="bubble">Haupttrommel (1–50)</span></div>
          <div class="slot">Auswurf</div>
          <canvas id="canvasA" width="680" height="420"></canvas>
        </div>
        <div class="simwrap">
          <div class="label"><span class="bubble">Eurotrommel (1–12)</span></div>
          <div class="slot">Auswurf</div>
          <canvas id="canvasB" width="680" height="420"></canvas>
        </div>
      </div>
      <div class="flex flex-wrap gap-2 mt-2">
        <button id="btnStartDraw" class="btn btn--green">Ziehung starten (5+2)</button>
        <button id="btnStop" class="btn btn--gray">Stop</button>
        <button id="btnReset" class="btn btn--amber">Reset</button>
      </div>
      <div id="result" class="mt-3 text-lg"><span class="badge">Noch kein Ergebnis</span></div>
      <div id="pickedList" class="mt-2 text-sm"></div>
    </section>

    <section class="card">
      <h2 class="font-bold text-xl mb-2">📂 Archiv (Auto + Fallback)</h2>
      <div class="mb-2">
        <input id="archiveUrl" class="bg-gray-900 p-2 rounded w-full" value="https://www.lotto-bayern.de/static/gamebroker_2/de/download_files/archiv_eurojackpot.zip">
      </div>
      <div class="flex flex-wrap gap-2 mb-2">
        <button id="loadLatestBtn" class="btn btn--green">📥 Neueste laden</button>
        <button id="forceDlBtn" class="btn btn--amber">⬇️ ZIP speichern</button>
        <a id="directDl" class="btn btn--gray" target="_blank" rel="noopener">🔗 Direktlink</a>
      </div>
      <div class="grid grid-cols-2 gap-2 text-center my-2">
        <div class="badge">Ziehungen: <b id="kpiCount">–</b></div>
        <div class="badge">Bis: <b id="kpiTo">–</b></div>
      </div>
      <div id="statusText" class="text-xs opacity-80">Noch kein Archiv geladen.</div>
    </section>
  </div>

  <section class="card mt-3">
    <h2 class="font-bold text-xl mb-2">📊 Analyse der aktuellen Ziehung</h2>
    <div id="analysisIntro" class="small mb-2">Warte auf neues Ergebnis…</div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
      <div>
        <div class="font-semibold mb-1">Hot & Cold (alle Ziehungen)</div>
        <table class="heat" id="hotcoldMain"></table>
        <div class="small mt-2 opacity-80">Hauptzahlen 1–50</div>
      </div>
      <div>
        <div class="font-semibold mb-1">Euro Hot & Cold</div>
        <table class="heat" id="hotcoldEuro"></table>
        <div class="small mt-2 opacity-80">Eurozahlen 1–12</div>
      </div>
      <div>
        <div class="font-semibold mb-1">Kombinations‑Treffer</div>
        <div id="comboStats" class="small">–</div>
      </div>
    </div>
  </section>

<script>
/* =================== Archiv: robust loader + global state =================== */
const LS_ARCH='ej_archive_v8', $=s=>document.querySelector(s);
window.__ej = {draws:[], freqA:Array(51).fill(0), freqB:Array(13).fill(0)};

async function withProxies(url){
  const trials=[url,'https://cors.isomorphic-git.org/'+url,'https://api.allorigins.win/raw?url='+encodeURIComponent(url),'https://thingproxy.freeboard.io/fetch/'+url,'https://corsproxy.io/?'+encodeURIComponent(url)];
  for(const u of trials){
    try{
      const res=await fetch(u,{cache:'no-store'}); if(!res.ok) throw 0;
      const ct=res.headers.get('content-type')||'';
      if(ct.includes('zip')||u.endsWith('.zip')){
        const blob=await res.blob(); const zip=await JSZip.loadAsync(blob); let combo='';
        for(const f of Object.values(zip.files)){ if(/\\.(txt|csv)$/i.test(f.name)){ combo+='\\n'+await f.async('string'); } }
        return combo;
      } else { return await res.text(); }
    }catch{}
  }
  throw new Error('Download fehlgeschlagen (alle Proxies)');
}

function parseText(txt){
  try{
    const t=txt.replace(/\\r\\n?/g,'\\n'), head=t.slice(0,2000);
    const delim=(head.match(/\\t/g)||[]).length>(head.match(/;/g)||[]).length?'\\t':(head.match(/;/g)||[]).length?';':',';
    const lines=t.split('\\n').map(l=>l.trim()).filter(Boolean);
    const h=lines[0].split(delim).map(x=>x.trim());
    const idx={Tag:h.findIndex(x=>/tag/i.test(x)), Monat:h.findIndex(x=>/monat|month/i.test(x)), Jahr:h.findIndex(x=>/jahr|year/i.test(x)),
      A:[1,2,3,4,5].map(k=>h.findIndex(x=>new RegExp('ZahlA'+k,'i').test(x))), B:[1,2].map(k=>h.findIndex(x=>new RegExp('ZahlB'+k,'i').test(x)))};
    if(idx.Tag<0||idx.Monat<0||idx.Jahr<0||idx.A.some(i=>i<0)||idx.B.some(i=>i<0)) throw new Error('Kopfzeile nicht erkannt.');
    const out=[];
    for(let i=1;i<lines.length;i++){
      const c=lines[i].split(delim).map(s=>s.trim()); if(c.length<=Math.max(...idx.A,...idx.B)) continue;
      const A=idx.A.map(ii=>+c[ii]).filter(Number.isFinite), B=idx.B.map(ii=>+c[ii]).filter(Number.isFinite);
      const day=+c[idx.Tag], mon=+c[idx.Monat], year=+c[idx.Jahr];
      if(A.length===5 && B.length===2){
        const date=new Date(Date.UTC(year,mon-1,day)).toISOString().slice(0,10);
        out.push({date, main:A.slice().sort((a,b)=>a-b), euro:B.slice().sort((a,b)=>a-b)});
      }
    }
    out.sort((a,b)=>a.date.localeCompare(b.date));
    window.__ej.draws = out;
    window.__ej.freqA = Array(51).fill(0); window.__ej.freqB = Array(13).fill(0);
    out.forEach(d=>{ d.main.forEach(n=>window.__ej.freqA[n]++); d.euro.forEach(n=>window.__ej.freqB[n]++); });
    $('#kpiCount').textContent=out.length; $('#kpiTo').textContent=out.at(-1)?.date||'–'; $('#statusText').textContent='Archiv geladen ✔';
    renderHotCold();
    return out;
  }catch(e){ $('#statusText').textContent='Fehler: '+e.message; return []; }
}

async function loadLatest(){
  $('#statusText').textContent='Online-Archiv wird geprüft…';
  try{ const raw=await withProxies($('#archiveUrl').value.trim()); parseText(raw); localStorage.setItem(LS_ARCH, raw); }
  catch(e){ const saved=localStorage.getItem(LS_ARCH); if(saved){ parseText(saved); $('#statusText').textContent='Fallback: lokale Kopie.' } else { $('#statusText').textContent='Kein Archiv verfügbar.' } }
}
$('#loadLatestBtn').onclick=loadLatest;
$('#forceDlBtn').onclick=async()=>{ try{ const r=await fetch($('#archiveUrl').value.trim()); const b=await r.blob(); const a=document.createElement('a'); a.href=URL.createObjectURL(b); a.download='archiv_eurojackpot.zip'; a.click(); }catch{ alert('Direkt-Download nicht möglich.'); } };
$('#directDl').href=$('#archiveUrl').value.trim();
(function(){ const saved=localStorage.getItem(LS_ARCH); if(saved){ parseText(saved);} else { loadLatest(); } })();

/* =================== Hot/Cold Render =================== */
function renderHotCold(){
  const A = window.__ej.freqA, B=window.__ej.freqB;
  function build(table, arr, maxN){
    const max = Math.max(...arr.slice(1)), min = Math.min(...arr.slice(1).filter(x=>x>0));
    let html='';
    for(let i=1;i<maxN+1;i+=5){
      html+='<tr>';
      for(let j=i;j<i+5 && j<=maxN;j++){
        const v=arr[j]||0;
        const cls = v>= (min + (max-min)*0.66) ? 'hot' : (v<= (min + (max-min)*0.33) ? 'cold' : '');
        html+=`<td class="${cls}"><div class="text-xs opacity-80">${String(j).padStart(2,'0')}</div><div class="font-bold">${v}</div></td>`;
      }
      html+='</tr>';
    }
    table.innerHTML=html;
  }
  build($('#hotcoldMain'), A, 50);
  build($('#hotcoldEuro'), B, 12);
}

/* =================== Simulation: TV-Style suction =================== */
const {Engine, Render, Runner, Bodies, Body, Constraint, Events, World} = Matter;

function createDrum(canvas, count, label){
  const engine=Engine.create({gravity:{x:0,y:0}});
  const world=engine.world; const W=canvas.clientWidth,H=canvas.clientHeight; canvas.width=W; canvas.height=H;
  const render=Render.create({canvas,engine,options:{width:W,height:H,wireframes:false,background:"transparent",pixelRatio:Math.min(2,devicePixelRatio||1)}});

  const cx=W*0.48, cy=H*0.58, R=Math.min(W,H)*0.38;
  const segs=80, thick=26, segLen=(Math.PI*2*R)/segs+2;
  const walls=[]; for(let i=0;i<segs;i++){ const a=i/segs*Math.PI*2, x=cx+Math.cos(a)*R, y=cy+Math.sin(a)*R;
    walls.push(Bodies.rectangle(x,y,thick,segLen,{isStatic:true,angle:a+Math.PI/2,slop:0.05,render:{fillStyle:"rgba(10,25,38,.96)"}})); }
  World.add(world,walls);
  // outer invisible bounds
  World.add(world,[Bodies.rectangle(W/2,-100,W+600,200,{isStatic:true,render:{visible:false}}),Bodies.rectangle(W/2,H+100,W+600,200,{isStatic:true,render:{visible:false}}),Bodies.rectangle(-100,H/2,200,H+600,{isStatic:true,render:{visible:false}}),Bodies.rectangle(W+100,H/2,200,H+600,{isStatic:true,render:{visible:false}})]);
  // intake (suction pipe) point near gate
  const intakeAngle = -Math.PI*0.18 + Math.PI/2;
  const intake = {x: cx + Math.cos(intakeAngle)*(R-70), y: cy + Math.sin(intakeAngle)*(R-70)};

  // Flap + chute to top-right
  const flap=Bodies.rectangle(intake.x, intake.y+60, 26, 120, {chamfer:{radius:6}, render:{fillStyle:"#136d68"}, frictionAir:0.02}); Body.setAngle(flap, intakeAngle);
  const hinge=Constraint.create({pointA:intake, bodyB:flap, pointB:{x:0,y:-60}, stiffness:1, length:0}); World.add(world,[flap, hinge]);
  const chute1=Bodies.rectangle(intake.x+60,intake.y-8,140,12,{isStatic:true,angle:-0.35,render:{fillStyle:"rgba(60,200,170,.20)"}});
  const chute2=Bodies.rectangle(intake.x+120,intake.y+34,160,12,{isStatic:true,angle:-0.35,render:{fillStyle:"rgba(60,200,170,.20)"}});
  World.add(world,[chute1,chute2]);

  // paddles (3 arms)
  const blade=(len,ang)=>Bodies.rectangle(cx,cy,len,14,{density:0.004,frictionAir:0.035,angle:ang,render:{fillStyle:"#17c3b2"}});
  const arms=[blade(R*0.8,0), blade(R*0.8,Math.PI/3), blade(R*0.8,-Math.PI/3)];
  arms.forEach(a=>World.add(world,[a,Constraint.create({pointA:{x:cx,y:cy},bodyB:a,length:0,stiffness:1})]));

  // balls placed evenly on ring
  const balls=[]; const rBall=Math.max(10,R*0.08);
  for(let i=0;i<count;i++){
    const ang=i/count*Math.PI*2 + Math.random()*0.1;
    const x=cx + Math.cos(ang)*R*0.6, y=cy + Math.sin(ang)*R*0.6;
    const b=Bodies.circle(x,y,rBall,{restitution:0.84,friction:0.018,frictionAir:0.02,density:0.0016,slop:0.01,render:{fillStyle:"#13b3aa",strokeStyle:"rgba(255,255,255,.08)",lineWidth:1}});
    b.labelNum=i+1; balls.push(b);
  }
  World.add(world,balls);

  // pretty overlays
  Events.on(render,"afterRender",()=>{
    const ctx=render.context;
    // numbers
    ctx.save(); ctx.textAlign="center"; ctx.textBaseline="middle"; ctx.font="800 14px Inter,system-ui";
    for(const b of balls){
      ctx.lineWidth=3; ctx.strokeStyle="rgba(0,0,0,.55)"; ctx.strokeText(String(b.labelNum).padStart(2,'0'), b.position.x,b.position.y);
      ctx.fillStyle=(b.render.fillStyle==="#f9d67a")?"#241a05":"#eafffb"; ctx.fillText(String(b.labelNum).padStart(2,'0'), b.position.x,b.position.y);
    }
    // suction cone visualization (soft glow when active)
    if(suctionActive>0){
      const g=ctx.createRadialGradient(intake.x,intake.y,2,intake.x,intake.y,50); g.addColorStop(0,"rgba(80,220,200,.35)"); g.addColorStop(1,"rgba(80,220,200,0)");
      ctx.fillStyle=g; ctx.beginPath(); ctx.arc(intake.x,intake.y,50,0,Math.PI*2); ctx.fill();
    }
    ctx.restore();
  });

  const runner=Runner.create(); Render.run(render); Runner.run(runner,engine);

  // gentle spin & velocity cap
  let t0=null; let suctionActive=0;
  Events.on(engine,"beforeUpdate",()=>{
    const ts=engine.timing.timestamp/1000; if(!t0) t0=ts; const dt=ts-t0;
    const speed = Math.min(2.2, 0.4 + dt*0.25);
    arms.forEach((a,i)=>Body.setAngularVelocity(a, i%2?speed:-speed));
    // keep flap closed when idle
    if(!suctionActive){ Body.setAngle(flap,intakeAngle); Body.setAngularVelocity(flap,0); }
    balls.forEach(b=>{ b.velocity.x=Math.max(-12,Math.min(12,b.velocity.x)); b.velocity.y=Math.max(-12,Math.min(12,b.velocity.y)); });
  });

  function nearestBall(){
    let best=null, bestD=1e9;
    for(const b of balls){ if(b.picked) continue; const dx=b.position.x-intake.x, dy=b.position.y-intake.y; const d=dx*dx+dy*dy; if(d<bestD){ bestD=d; best=b; } }
    return best;
  }

  async function suctionOne(){
    // attract the nearest ball to intake (without teleport)
    const target=nearestBall(); if(!target) return null;
    suctionActive=1;
    const T=900; const start=performance.now();
    while(performance.now()-start < T){
      const dx=intake.x-target.position.x, dy=intake.y-target.position.y;
      const dist=Math.hypot(dx,dy)+1e-6;
      const fx = (dx/dist)*0.015, fy=(dy/dist)*0.015; // gentle force
      Body.applyForce(target, target.position, {x:fx, y:fy});
      await sleep(16);
    }
    suctionActive=0;
    return target;
  }

  async function openFlap(ms=480){
    for(let t=0;t<10;t++){ Body.rotate(flap,0.10); await sleep(12); }
    await sleep(ms);
    for(let t=0;t<10;t++){ Body.rotate(flap,-0.10); await sleep(12); }
    Body.setAngle(flap,intakeAngle);
  }

  function insideIntake(b){
    return Math.abs(b.position.x-intake.x)<26 && Math.abs(b.position.y-intake.y)<26;
  }

  function tryEject(b){
    if(!b || b.picked) return null;
    if(insideIntake(b)){
      Body.setVelocity(b,{x:10,y:-2}); Body.setAngularVelocity(b,3);
      b.picked=true; b.render.fillStyle="#f9d67a"; return b;
    }
    return null;
  }

  async function drawOne(){
    // suction to intake, then open flap and eject
    const target=await suctionOne();
    await openFlap(520);
    const t0=performance.now();
    while(performance.now()-t0 < 1000){
      const got=tryEject(target); if(got) return got;
      await sleep(16);
    }
    return null;
  }

  return {drawOne, engine, balls};
}

function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }

// Build drums
const drumA=createDrum(document.getElementById('canvasA'),50,'A');
const drumB=createDrum(document.getElementById('canvasB'),12,'B');

// Controls
document.getElementById('btnStop').onclick=()=>{ drumA.engine.enabled=false; drumB.engine.enabled=false; };
document.getElementById('btnReset').onclick=()=>location.reload();

// Sequential draw + analysis
document.getElementById('btnStartDraw').onclick=async ()=>{
  const btn=document.getElementById('btnStartDraw'); if(btn.disabled) return; btn.disabled=true;
  const result={main:[], euro:[], created_at:new Date().toISOString()};
  // warm-up
  await sleep(1200);
  for(let i=0;i<5;i++){ const b=await drumA.drawOne(); if(b) result.main.push(b.labelNum); renderPicked(result); await sleep(350); }
  for(let i=0;i<2;i++){ const b=await drumB.drawOne(); if(b) result.euro.push(b.labelNum); renderPicked(result); await sleep(350); }
  result.main.sort((a,b)=>a-b); result.euro.sort((a,b)=>a-b);
  $('#result').innerHTML=`<b>Ergebnis:</b> Haupt: ${result.main.map(n=>String(n).padStart(2,'0')).join(' ')} · Euro: ${result.euro.map(n=>String(n).padStart(2,'0')).join(' ')} <div class="text-xs opacity-80">${result.created_at}</div>`;
  analyzeResult(result);
  btn.disabled=false;
};

function renderPicked(res){
  $('#pickedList').innerHTML = `Gezogen: ${res.main.map(n=>`<span class='chip chip--gold ml-1'>${String(n).padStart(2,'0')}</span>`).join(' ')} ${res.euro.length?'·':''} ${res.euro.map(n=>`<span class='chip chip--gold ml-1'>${String(n).padStart(2,'0')}</span>`).join(' ')}`;
}

/* =================== Analyse =================== */
function analyzeResult(res){
  const draws=window.__ej.draws||[]; if(!draws.length){ $('#analysisIntro').textContent='Keine Archivdaten geladen.'; return; }
  $('#analysisIntro').textContent=`Archiv berücksichtigt: ${draws.length} Ziehungen • Vergleich mit kompletter Historie`;

  // Frequenz & letztes Auftreten (schon via Hot/Cold oben)
  function lastSeen(num, kind){ // kind 'A' or 'B'
    for(let i=draws.length-1;i>=0;i--){
      if(kind==='A' && draws[i].main.includes(num)) return draws[i].date;
      if(kind==='B' && draws[i].euro.includes(num)) return draws[i].date;
    }
    return '–';
  }

  // Kombi-Stats: wie oft 5/4/3 der Hauptzahlen in einer früheren Ziehung zusammen vorkamen
  const setMain = new Set(res.main);
  let m5=0,m4=0,m3=0; let euro2=0,euro1=0;
  for(const d of draws){
    const matchMain = d.main.filter(n=>setMain.has(n)).length;
    if(matchMain===5) m5++; else if(matchMain===4) m4++; else if(matchMain===3) m3++;
    const matchEuro = d.euro.filter(n=>res.euro.includes(n)).length;
    if(matchEuro===2) euro2++; else if(matchEuro===1) euro1++;
  }
  $('#comboStats').innerHTML = `
    <div>Hauptzahlen – Treffer in Archiv:</div>
    <div class="mt-1">🎯 <b>5 aus 5</b>: ${m5}× · <b>4 aus 5</b>: ${m4}× · <b>3 aus 5</b>: ${m3}×</div>
    <div class="mt-2">Eurozahlen – Treffer in Archiv:</div>
    <div>⭐ <b>2 aus 2</b>: ${euro2}× · <b>1 aus 2</b>: ${euro1}×</div>
    <hr class="my-2 opacity-20">
    <div class="small opacity-80">„x aus y“ bedeutet: so viele deiner aktuellen Zahlen tauchten in derselben früheren Ziehung gemeinsam auf.</div>
  `;

  // (Optional) Zahlendetails – Hier zeigen wir kurz die letzten Auftritte deiner gezogenen Zahlen
  const details = [...res.main.map(n=>({n,kind:'A'})), ...res.euro.map(n=>({n,kind:'B'}))]
    .map(x=>`${String(x.n).padStart(2,'0')}: zuletzt ${lastSeen(x.n,x.kind)}`)
    .join(' · ');
  const line = document.createElement('div'); line.className='small mt-2 opacity-90'; line.textContent='Zuletzt gesehen: '+details;
  $('#comboStats').append(line);
}
</script>
</body>
</html>
